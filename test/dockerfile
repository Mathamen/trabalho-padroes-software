FROM ubuntu:20.04

# Install PostgreSQL
RUN apt-get update && \
    apt-get install -y postgresql postgresql-contrib

# Copy your application code
COPY . /app

# Setup PostgreSQL
RUN service postgresql start && \
    sudo -u postgres psql -c "CREATE DATABASE app1_db;" && \
    sudo -u postgres psql -c "CREATE USER app1_user WITH ENCRYPTED PASSWORD 'your_password';" && \
    sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON DATABASE app1_db TO app1_user;"

WORKDIR /app

# Expose the ports and start your app
CMD ["your_app_start_command"]
